{% extends "core/base.html" %}
{% load static %}

{% block title %}Event Detail{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto bg-white rounded shadow p-6">
  {% if event.image %}
    <img src="{{ event.image.url }}" alt="{{ event.name }}" class="w-full h-64 object-cover rounded mb-6">
  {% else %}
    <img src="{% static 'images/default_event.jpg' %}" alt="Default Event" class="w-full h-64 object-cover rounded mb-6">
  {% endif %}

  <h1 class="text-3xl font-bold mb-2">{{ event.name }}</h1>

  <p class="text-gray-600 mb-4">
    Category:
    {% if event.category %}
      {{ event.category.name }}
    {% else %}
      Uncategorized
    {% endif %}
  </p>

  <p class="mb-4">{{ event.description }}</p>

  <p class="mb-2"><strong>Date:</strong> {{ event.date }}</p>
  <p class="mb-2"><strong>Time:</strong> {{ event.time }}</p>
  <p class="mb-4"><strong>Location:</strong> {{ event.location }}</p>

  <h2 class="text-2xl font-semibold mb-3">Participants ({{ event.participants.count }})</h2>
  <ul class="list-disc list-inside mb-4">
    {% for participant in event.participants.all %}
      <li>{{ participant.name }}</li>
    {% empty %}
      <li>No participants yet.</li>
    {% endfor %}
  </ul>

  <div class="mt-4">
    {% if user.is_authenticated %}
      <a href="{% url 'events:rsvp_event' event.pk %}" class="px-3 py-1 rounded bg-green-600 text-white">RSVP</a>

      {% if user_is_organizer %}
        <a href="{% url 'events:event_update' event.pk %}" class="px-3 py-1 rounded bg-yellow-500 text-white">Edit</a>
        <a href="{% url 'events:event_delete' event.pk %}" class="px-3 py-1 rounded bg-red-500 text-white">Delete</a>
      {% endif %}

    {% else %}
      <a href="{% url 'login' %}" class="px-3 py-1 bg-blue-500 text-white rounded">Login to RSVP</a>
    {% endif %}
  </div>
</div>
{% endblock %}
